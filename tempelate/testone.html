<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hi there</title>
    <link rel="stylesheet" href="git.css">
    <link rel="stylesheet" href="highlight.css">
</head>
<body>
<h1>这是本学期CSE101的第一次Assesment</h1>
<h2>本学期我们的assessment主要学习x86内嵌汇编语言，如果你想顺利的完成本次作业，你需要掌握如下技能。</h2>
<ul>
<li>安装visual studio,这就意味着mac os系统彻底报废了，赶快换台windows吧！</li>
<li>viusal studio的<em>调试方法</em>，对于java来说还是有点麻烦的。</li>
<li>按照pdf基本的配置文件能力，顺利运行出win32位应用程序,此处pdf很有用<a href="http://ice.xjtlu.edu.cn/pluginfile.php/14537/mod_resource/content/0/Practical1_v2.pdf">how to configure your c++ file?</a></li>
<li>一丁点c/c++基础，学校的pdf够用<a href="http://ice.xjtlu.edu.cn/mod/resource/view.php?id=13491&amp;redirect=1">c prime</a></li>
<li>熟练掌握并清楚基本的寄存器的作用, <code>eax</code>, <code>ebx</code>, <code>ecx</code>, <code>esi</code>, <code>edi</code>, 全部都在lecture或者<a href="http://ice.xjtlu.edu.cn/mod/resource/view.php?id=32449&amp;redirect=1">instruction set</a>里有。</li>
<li>对于内存地址和内存中的明辨清晰，明白<code>lea</code>和<code>mov</code>的区别。</li>
<li>熟悉stack的工作方法，掌握什么时候加减<code>esp</code>。</li>
<li>比较<code>cmp</code>和<code>flag</code>,这里只写两个最有用的。<code>jle &lt;=</code>, <code>jge &gt;=</code>。e代表等于，去掉也就不用多说什么意思了。</li>
</ul>
<hr>
<h2>编程中的步骤&amp;&amp;难点</h2>
<p>接下来就是要把这5，6部分成小部分逐一击破，虽然看上去挺简单的，但转换成汇编我却写了将近200行😓(新手勿喷)。</p>
<ol>
<li>user输入的counter，调用<code>print</code>, <code>scanf_s</code>这些<a href="http://ice.xjtlu.edu.cn/mod/resource/view.php?id=35117&amp;redirect=1">pdf</a>里都有讲怎么用.print坑在于如果要格式化字符串需要先把数字push到stack中，然后才会传给result中的<code>%d</code>.之前的pdf只有讲过scanf_s的方法。<div class="highlight"><pre><span></span><span class="kt">char</span> <span class="n">format</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&quot;%d&quot;</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">counter</span><span class="p">;</span>
<span class="kt">char</span> <span class="n">alter_message</span> <span class="o">=</span> <span class="s">&quot;The result is %d&quot;</span><span class="p">;</span>
<span class="n">_asm</span><span class="p">{</span>
<span class="c1">//已经给counter赋过值了</span>
<span class="n">lea</span>   <span class="n">eax</span><span class="p">,</span> <span class="n">counter</span>
<span class="n">push</span>  <span class="n">eax</span>
<span class="n">lea</span>   <span class="n">eax</span><span class="p">,</span> <span class="n">alter_message</span>
<span class="n">push</span>  <span class="n">eax</span>
<span class="n">call</span>  <span class="n">printf</span>
<span class="n">add</span>   <span class="n">esp</span><span class="p">,</span> <span class="mi">8</span>
<span class="p">}</span>
</pre></div>
</li>
<li>检测输入是否在2和5之间，这个就连接着两次cmp就行了，并且将有效的数字赋值给<code>counter</code>.</li>
<li><strong>循环输入scanf_s,并且赋值给数组，这里的赋值方法还是很坑的，知道我请教TA后才知道如何正确将你的scanf_s数字存入数组中。但是我还是不太清楚为什么会有 <code>[ebx], edi</code>这样的操作,还是得好好学。</strong><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">num_array</span><span class="p">[</span><span class="mi">5</span><span class="p">];</span>
<span class="n">lea</span>   <span class="n">ebx</span><span class="p">,</span> <span class="n">num_array</span>
<span class="n">_asm</span><span class="p">{</span>
<span class="nl">Loop1</span><span class="p">:</span>
<span class="c1">//只写存值的部分</span>
   <span class="n">mov</span>    <span class="n">edi</span><span class="p">,</span> <span class="n">temp</span>
 <span class="n">mov</span>    <span class="p">[</span><span class="n">ebx</span><span class="p">],</span> <span class="n">edi</span>
 <span class="n">add</span>    <span class="n">ebx</span><span class="p">,</span> <span class="mi">4</span>
<span class="p">}</span>
</pre></div>
</li>
<li>计算循环次数，这个简单，在上面我们使用一个比较就可以每次递增<code>valid_num</code>就可以了。</li>
<li>求和，这个也比较简单，tutorial老师的<a href="http://ice.xjtlu.edu.cn/mod/resource/view.php?id=38888&amp;redirect=1">pdf</a>中有</li>
<li><strong>排序，这是这次lab中最难的一部分，因为即使他给了<a href="http://ice.xjtlu.edu.cn/mod/resource/view.php?id=32449&amp;redirect=1">冒泡排序</a>,你会发现copy到你的代码里还是会报错</strong>，后来我在stackoverflow上提问得到了帮助，这里你需要<strong>将<code>ret</code>去掉并且将<code>mov ebx</code>替换成<code>lea ebx</code>,这两步都必须后才能正确输出。</strong></li>
<li>最后就是输出sort的结果，这里结尾处是句号，中间是comma可有可无不记分，想写的话不过也就多写十几行😓。</li>
</ol>
<hr>
<h2>CSE101的一些感受</h2>
<p>觉得CSE101还是蛮良心的一门课，不管是上lecture的PPT(虽然有些枯燥看是可以看到老师还是在反复审阅PPT的痕迹，和CSE103日期不一致的PPT比起来就强太多了，至于Steven.Guan的声音嘛，反正我坐第0排，听的很清楚😼)还是作业的难易程度，都符合标准水平，对于今后的计算机学习还是有很大的帮助的。其他老师和TA也很负责，有什么问题直接就好了，甚至他们觉得一两句话讲不清的时候会主动联系你给你安排session。都让人能感觉到他们都在很用心准备这心材料帮助你学习。</p>

</body>
</html>